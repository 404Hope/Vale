<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flirty Valentine Adventure</title>
  <style>
    body {
      margin:0;
      padding:0;
      font-family:'Segoe UI',sans-serif;
      background: radial-gradient(circle at center, #ff4d6d 0%, #c9184a 60%, #800f2f 100%);
      overflow:hidden;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      position:relative;
    }

    /* ===== Intro Overlay ===== */
    #introOverlay {
      position:fixed;
      inset:0;
      background: rgba(255,0,90,0.95);
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      z-index:10;
    }
    #tapHeart {
      font-size:120px;
      line-height:1;
      animation: beat 1.1s ease-in-out infinite;
      cursor:pointer;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,0.25));
    }
    #tapLabel {
      margin-top:8px;
      color:#fff;
      font-weight:600;
      letter-spacing:0.08em;
      opacity:0.9;
    }
    @keyframes beat {
      0%,100%{transform:scale(1);}
      25%{transform:scale(1.15);}
      40%{transform:scale(0.98);}
      60%{transform:scale(1.12);}
      75%{transform:scale(1.02);}
    }

    /* ===== Pages ===== */
    .page {
      position:fixed;
      inset:0;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      opacity:0;
      pointer-events:none;
      transition:opacity 0.7s ease;
      z-index:2;
    }
    .page.active { opacity:1; pointer-events:auto; }

    h1,p {
      color:white;
      text-shadow:0 2px 6px rgba(0,0,0,0.5);
      background: rgba(0,0,0,0.2);
      padding:10px 20px;
      border-radius:8px;
      margin:10px 0;
    }

    button {
      padding:15px 30px;
      font-size:18px;
      margin:15px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      transition: transform 0.3s ease;
    }
    button:hover{ transform:scale(1.05); }
    #yesBtn{ background:#fff;color:#ff3366; }
    #noBtn{ background:#fff;color:#333; }

    .message {
      position:fixed;
      top:20%;
      left:50%;
      transform:translateX(-50%);
      background:white;
      color:#ff3366;
      padding:10px 15px;
      border-radius:8px;
      opacity:0;
      transition:opacity 0.5s ease;
      z-index:1000;
    }
    .message.show{ opacity:1; }

    /* ===== Floating Hearts ===== */
    #heartContainer {
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
    }
    .heart {
      position:absolute;
      font-size:20px;
      animation: floatUp 5s linear infinite;
      opacity:0.7;
    }
    @keyframes floatUp{
      0%{ transform:translateY(100vh); opacity:0; }
      50%{ opacity:1; }
      100%{ transform:translateY(-10vh); opacity:0; }
    }
  </style>
</head>
<body>

<div id="heartContainer"></div>

<!-- ===== Intro Overlay ===== -->
<div id="introOverlay">
  <div id="tapHeart">â¤ï¸</div>
  <div id="tapLabel">Tap me</div>
</div>
<audio id="bgMusic" loop>
  <source src="https://example.com/your-romantic-track.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<!-- ===== Pages ===== -->
<div id="page1" class="page">
  <h1 id="introTitle"></h1>
  <button id="startBtn">Start</button>
</div>

<div id="page2" class="page">
  <h1>Pick something funâ€¦ i dare youğŸ˜</h1>
  <button class="choiceBtn" data-msg="Pizza day it is! Donâ€™t worry, I wonâ€™t eat your last sliceâ€¦ maybe ğŸ•ğŸ˜œ">Pizza ğŸ•</button>
  <button class="choiceBtn" data-msg="Arcade battle? Hope youâ€™re ready to loseâ€¦ or maybe Iâ€™ll let you win ğŸ˜ğŸ®">Arcade ğŸ®</button>
  <button class="choiceBtn" data-msg="Karaoke? Time to hear your angelic voiceâ€¦ or laugh with me ğŸ˜‚ğŸ¤">Karaoke ğŸ¤</button>
  <button class="choiceBtn" data-msg="Dessert run? Ice cream, donutsâ€¦ you pick, Iâ€™ll follow ğŸ©ğŸ¦">Dessert ğŸ©</button>
  <button class="choiceBtn" data-msg="Photo scavenger hunt? Letâ€™s see who can find the weirdest thing first ğŸ“¸ğŸ˜">Photo Hunt ğŸ“¸</button>
</div>

<div id="page3" class="page">
  <h1>Click all the hearts to unlock a secret ğŸ’–</h1>
  <div id="puzzleHearts"></div>
</div>

<div id="page4" class="page">
  <h1>Will you be my Valentine?</h1>
  <button id="yesBtn">Yes â¤ï¸</button>
  <button id="noBtn">No âŒ</button>
  <p id="valentineMsg"></p>
</div>

<div id="page5" class="page">
  <h1 id="finalMsg"></h1>
</div>

<script>
  const girlName = new URLSearchParams(window.location.search).get("name") || "Yemu";
  let noClickCount = 0;

  // Pages
  const page1 = document.getElementById('page1');
  const page2 = document.getElementById('page2');
  const page3 = document.getElementById('page3');
  const page4 = document.getElementById('page4');
  const page5 = document.getElementById('page5');

  // Intro tap heart
  const introOverlay = document.getElementById('introOverlay');
  const tapHeart = document.getElementById('tapHeart');
  tapHeart.onclick = () => {
    introOverlay.style.display='none';
    page1.classList.add('active');
    // Play music on first interaction
    const music = document.getElementById('bgMusic');
    music.play().catch(()=>console.log('Music requires interaction'));
  };

  // Page1 -> Page2
  document.getElementById("introTitle").textContent=`Hey ${girlName}â€¦ ready for a little adventure? ğŸ˜‰`;
  document.getElementById('startBtn').onclick = () => switchPage(page1,page2);

  // Switch pages
  function switchPage(current,next){
    current.classList.remove("active");
    next.classList.add("active");
  }

  // Page2 Choices
  document.querySelectorAll('.choiceBtn').forEach(btn=>{
    btn.onclick = ()=>{
      showMessage(btn.dataset.msg);
      setTimeout(()=>{ switchPage(page2,page3); createPuzzleHearts(); },1500);
    }
  });

  // Page3 Puzzle Hearts
  function createPuzzleHearts(){
    const puzzleHearts = document.getElementById('puzzleHearts');
    puzzleHearts.innerHTML='';
    let heartsClicked=0;
    const responses = [
      "Carefulâ€¦ youâ€™re making me blush ğŸ˜³ğŸ’–",
      "Awwwâ€¦ youâ€™re too sweet ğŸ˜ğŸ’—",
      "Stop it! My heartâ€™s racing ğŸ˜…ğŸ’˜",
      "Keep goingâ€¦ Iâ€™m loving this ğŸ˜ŒğŸ’",
      "Okayâ€¦ you got me, Iâ€™m officially smitten ğŸ˜ğŸ’“"
    ];

    for(let i=0;i<5;i++){
      let heart = document.createElement('span');
      heart.textContent='ğŸ’–';
      heart.style.fontSize='40px';
      heart.style.margin='10px';
      heart.style.cursor='pointer';
      heart.onclick = ()=>{
        heart.style.visibility='hidden';
        showMessage(responses[i]);
        heartsClicked++;
        if(heartsClicked===5){
          setTimeout(()=>switchPage(page3,page4),1500);
        }
      };
      puzzleHearts.appendChild(heart);
    }
  }

  // Page4 Yes/No
  const yesBtn=document.getElementById('yesBtn');
  const noBtn=document.getElementById('noBtn');
  const valentineMsg=document.getElementById('valentineMsg');

  yesBtn.onclick = ()=>{
    saveResponse("YES", noClickCount);
    const msgs = [
      `${girlName}â€¦ you just made me smile like an idiot ğŸ˜`,
      `OMG ${girlName}, Iâ€™ve been waiting for this ğŸ˜â¤ï¸`,
      `Wowâ€¦ I canâ€™t stop grinning because of you ğŸ˜ŒğŸ’–`
    ];
    valentineMsg.textContent = msgs[Math.floor(Math.random()*msgs.length)];
    setTimeout(()=>switchPage(page4,page5),2000);
    document.getElementById('finalMsg').textContent=`Thanks for being awesome, ${girlName}! ğŸ˜ğŸ’`;
  };

  noBtn.onclick = ()=>{
    noClickCount++;
    saveResponse("NO_CLICK", noClickCount);
    const playfulDodges = [
      "Hey! Try again ğŸ˜",
      "Catch me if you can ğŸ˜œ",
      "Hmmâ€¦ maybe Iâ€™ll make it harder ğŸ’€"
    ];
    if(noClickCount>=4){
      valentineMsg.textContent="Ohâ€¦ that's a shame ğŸ˜¢ Maybe next time ğŸ˜‰";
      noBtn.style.display='none';
    } else {
      noBtn.style.position='absolute';
      noBtn.style.top=Math.random()*(window.innerHeight-100)+'px';
      noBtn.style.left=Math.random()*(window.innerWidth-100)+'px';
      valentineMsg.textContent = playfulDodges[Math.floor(Math.random()*playfulDodges.length)];
    }
  };

  // Messages
  function showMessage(msg){
    const m=document.createElement('div');
    m.className='message show';
    m.textContent=msg;
    document.body.appendChild(m);
    setTimeout(()=>{ m.classList.remove('show'); setTimeout(()=>m.remove(),500); },2500);
  }

  // Save responses
  function saveResponse(type,noCount=0){
    const data={name:girlName,response:type,noClicks:noCount,time:new Date().toISOString()};
    let responses=JSON.parse(localStorage.getItem("valentineResponses")||"[]");
    responses.push(data);
    localStorage.setItem("valentineResponses",JSON.stringify(responses));
  }

  // Floating hearts
  const heartContainer = document.getElementById('heartContainer');
  for(let i=0;i<15;i++){
    let h = document.createElement('div');
    h.className='heart';
    h.textContent='â¤ï¸';
    h.style.left=Math.random()*window.innerWidth+'px';
    h.style.animationDuration=(4+Math.random()*3)+'s';
    heartContainer.appendChild(h);
  }
</script>
</body>
</html>
